"use strict";var Editor=function(){function e(e,t){function n(e){return!1}if(void 0!=e){this.editor_name=e,this.container=new Array,this.work_space=new Array,this.symbol_buffer=new Array,this.console=new Array,this.line=new Array,this.current_line=new Array,void 0!=Observable&&(Observable.apply(this,arguments),this.subscribe(Key_Observer));for(var s=0;s<document.getElementsByClassName(this.editor_name).length;s++){this.container[s]=document.getElementsByClassName(this.editor_name)[s],this.container[s].style.position="relative",this.symbol_buffer[s]=document.createElement("textarea"),this.symbol_buffer[s].className="symbol_buffer",this.symbol_buffer[s].cols="1",this.symbol_buffer[s].rows="1",this.symbol_buffer[s].style.opacity="0",this.container[s].appendChild(this.symbol_buffer[s]),this.work_space[s]=document.createElement("div"),this.work_space[s].className="result",this.work_space[s].style.border="1px solid #000",this.work_space[s].style.height="500px",this.work_space[s].onselectstart=function(){return!1},this.work_space[s].onmousedown=n,this.container[s].appendChild(this.work_space[s]),this.line[s]=new Array,this.current_line[s]=1,this.line[s][this.current_line[s]]=document.createElement("div"),this.line[s][this.current_line[s]].className="line",this.line[s][this.current_line[s]].setAttribute("line_number",this.current_line[s]),this.work_space[s].appendChild(this.line[s][this.current_line[s]]);var r=document.createElement("span");r.className="wet-line-start active",r.innerHTML="",this.line[s][this.current_line[s]].appendChild(r),1==t.console&&(this.console[s]=document.createElement("div"),this.console[s].className="console",this.console[s].style.border="1px solid #000",this.console[s].style.position="absolute",this.console[s].style.top="0px",this.console[s].style.right="0px",this.console[s].style.width="200px",this.console[s].style.height="50px",this.container[s].appendChild(this.console[s])),this.work_space[s].object=this,this.work_space[s].index=s,this.work_space[s].key_scope=Key_Scope.getInstance(),this.work_space[s].onclick=function(){this.object.symbol_buffer[this.index].focus()},this.symbol_buffer[s].object=this,this.symbol_buffer[s].index=s,this.symbol_buffer[s].key_scope=Key_Scope.getInstance(),this.symbol_buffer[s].onkeydown=function(e){void 0!=Observable&&this.object.publish(this.object,this.key_scope,this.index,e,"pressed")},this.symbol_buffer[s].onkeyup=function(e){void 0!=Observable&&this.object.publish(this.object,this.key_scope,this.index,e,"relised")},this.symbol_buffer[s].onblur=function(){this.key_scope.clearKeyMap()}}}else console.log("sorry but you have not add any name to editors name field")}return e}(),Char_Class_Generator=function(){function e(e){return i=e,a=i.charCodeAt(0),47>=a||a>=58&&64>=a||a>=91&&96>=a||a>=122&&126>=a?c=o+"signifier":a>=48&&57>=a?c=o+"numeral":(a>=65&&90>=a||a>=97&&122>=a)&&(c=o+"character"),e.length>=1&&"wet-line-start"==e&&(c="wet-line-start"),this}function t(e){i=e,a=i.charCodeAt(0);for(var t=[{start_code:32,end_code:32,desc:"space"},{start_code:33,end_code:33,desc:"exclamation"},{start_code:34,end_code:34,desc:"quotation "},{start_code:35,end_code:35,desc:"hash"},{start_code:36,end_code:36,desc:"dollar"},{start_code:37,end_code:37,desc:"percent"},{start_code:38,end_code:38,desc:"ampersand"},{start_code:39,end_code:39,desc:"apostrophe"},{start_code:40,end_code:40,desc:"left_parenthesis"},{start_code:41,end_code:41,desc:"right_parenthesis"},{start_code:42,end_code:42,desc:"asterix"},{start_code:43,end_code:43,desc:"plus"},{start_code:44,end_code:44,desc:"comma"},{start_code:45,end_code:45,desc:"hyphen"},{start_code:46,end_code:46,desc:"period"},{start_code:47,end_code:47,desc:"slash"},{start_code:58,end_code:58,desc:"colon"},{start_code:59,end_code:59,desc:"semicolon"},{start_code:60,end_code:60,desc:"less_than"},{start_code:61,end_code:61,desc:"equals"},{start_code:62,end_code:62,desc:"greater_than"},{start_code:63,end_code:63,desc:"question"},{start_code:64,end_code:64,desc:"at"},{start_code:65,end_code:90,desc:"uppercase"},{start_code:91,end_code:91,desc:"left_square_vrecket"},{start_code:92,end_code:92,desc:"backslash"},{start_code:93,end_code:93,desc:"right_square_vrecket"},{start_code:94,end_code:94,desc:"caret"},{start_code:95,end_code:95,desc:"underscore"},{start_code:96,end_code:96,desc:"grave_accent"},{start_code:123,end_code:123,desc:"left_curly_brace"},{start_code:124,end_code:124,desc:"vertical_bar"},{start_code:125,end_code:125,desc:"left_curly_brace"},{start_code:126,end_code:126,desc:"tilda"}],n=0;n<t.length;n++)c+=a==t[n].start_code?o+t[n].desc:a>=t[n].start_code&&a<=t[n].start_code?o+t[n].desc:"";return this}function n(e){return o=e||"",this}function s(){return c+=" ",this}function r(){return c}var i="",a="",c="",o="";return{mainClass:e,subClass:t,generate:r,setPrefix:n,space:s}},Observable=function(){this.subscribers=new Array,this.subscribe=function(e){this.subscribers.push(e)},this.unsubscribe=function(e){for(var t=0;t<this.subscribers.length;t++)if(this.subscribers[t]===e)return void this.subscribers[t].splice(t,1)},this.publish=function(e,t,n,s,r){for(var i=0;i<this.subscribers.length;i++)this.subscribers[i](e,t,n,s,r)}},Key_Observer=function(e,t,n,s,r){var i=(new Char_Class_Generator("wet-"),new Module.getInstance),a=e.container[n];e.line[n][e.current_line[n]],new Divider,new Director(a,"wet-");t.getKeyMap()[0]<"46"&&(s.preventDefault(),s.stopPropagation()),i.setOptions({object:e,index:n}),i.runFunction("key"),"pressed"==r?(i.setOptions({object:e,index:n}),i.runFunction(t.getStringKeyMap()),t.keyDown(s)):"relised"==r&&(i.runFunction(t.getStringKeyMap()),t.keyUp(s)),void 0!=e.console[n]&&(e.console[n].innerHTML=t.getKeyMap())},Key_Scope=function(){function e(){function e(e){if(0==c.length)c.push(e);else{for(var t=0;t<=c.length;t++)c[t]==e&&(o=!0);0==o&&c.push(e),o=!1}}function t(e){for(var t=0;t<=c.length;t++)c[t]==e&&c.splice(t,1)}function n(t){var n;window.event?n=t.keyCode:t.which&&(n=t.which),e(n)}function s(e){var n;window.event?n=e.keyCode:e.which&&(n=e.which),t(n)}function r(){return c.sort()}function i(){return c.sort().toString()}function a(){c=[]}var c=new Array,o=!1;return{keyDown:n,keyUp:s,getKeyMap:r,clearKeyMap:a,getStringKeyMap:i}}var t;return{getInstance:function(){return t||(t=e()),t}}}(),Module=function(){function e(){function e(e){var t=e.getElementsByClassName("active")[0],n=new Char_Class_Generator("wet-");void 0!=t&&(t.className.split(" ").indexOf("wet-line-start")>=0?t.className="wet-line-start":t.className=n.setPrefix("wet-").mainClass(t.innerHTML).space().subClass(t.innerHTML).generate())}function t(e){var t=e.getElementsByClassName("parent")[0];void 0!=t&&(t.className="wet-word")}function n(e,t){c[e]={function_name:t}}function s(){return console.log(c),c}function r(e){(e>0||"key"==e)&&void 0!=c[e]&&(this[c[e].function_name](a)||"")}function i(e){a=e}var a,c={8:{function_name:"backspase"},9:{function_name:"tab"}};return{addFunction:n,dump:s,runFunction:r,key_assotiation:c,setOptions:i,deletePrevioseCursor:e,deletePrevioseParent:t}}var t;return{getInstance:function(){return t||(t=e()),t}}}(),Divider=function(){function e(){this.divide=function(e){for(var t=e.innerHTML,n="",s=t.split(""),r=new Char_Class_Generator("wet-"),i=0;i<s.length;i++)n+='<span class="'+r.setPrefix("wet-").mainClass(s[i]).space().subClass(s[i]).generate()+'">'+s[i]+"</span>";return n},this.concat=function(e){if(void 0!=e){var t=e.innerHTML,n=/(<([^>]+)>)/gi;return t=t.replace(n,"")}return""},this.bisect=function(e){var t=new Array;t[0]="",t[1]="";var n=0;if(void 0!=e){for(var s=0;s<=e.childNodes.length-1;s++){var r=e.childNodes[s].className.split(" ").indexOf("active");t[n]+=e.childNodes[s].outerHTML,r>=0&&(n=1)}return t}return t}}return e}(),Director=function(){function e(e,t,n){this.concrete_entity=e,this.prefix=t,this.active=n,this.class_generator=new Char_Class_Generator(this.prefix),this.isThereAnyActiveWords=function(){var e=this.concrete_entity.getElementsByClassName("parent")[0]||!1;return!!e},this.isCursorFirstOnALine=function(e){var t=this.getCursorEntity(e),n=t.previousSibling||!1;return n?n.className.split(" ").indexOf(this.prefix+"line-start")>=0:!1},this.isCursorBeforeWord=function(e){var t=e.previousSibling,n=t.className.split(" ").indexOf(this.prefix+"word");return n>=0},this.isStart=function(e){return e?e.className.split(" ")[0]==this.prefix+"line-start":!1},this.isSignifier=function(e){return e?e.className.split(" ").indexOf(this.prefix+"signifier")>=0:!1},this.isWord=function(e){return e?e.className.split(" ").indexOf(this.prefix+"word")>=0:!1},this.isParentWord=function(e){return e?e.className.split(" ").indexOf("parent")>=0:!1},this.isCharacter=function(e){var t=this.prefix+"character";return e?e.className.split(" ").indexOf(t)>=0:!1},this.isCursoreBeforeWord=function(e){var t=this.prefix+"word";return e?e.nextSibling.className.split(" ").indexOf(t)>=0:!1},this.getCursorEntity=function(e){var t=this.concrete_entity.getElementsByClassName(e)[0]||!1;return t?t:(console.log("getCursorEntity - has error"),!1)},this.getBeforeEntity=function(e){var t=e.previousSibling||!1;return t?t:!1},this.getParentWord=function(){var e=this.concrete_entity.getElementsByClassName("parent")[0]||!1;return e?e:!1},this.getLastElement=function(e){var t=e.childNodes[e.childNodes.length-1]||!1;return t?t:!1},this.getCursorPosition=function(e){for(var t=0,n=0;n<e.parentElement.childNodes.length-1;n++){var s=e.parentElement.childNodes[n].className,r=s.split(" ");if(r.indexOf("active")>=0)break;t++}return t},this.makeItParentWord=function(e){e&&(e.className=this.prefix+"word parent")},this.makeItWord=function(e){e&&(e.className=this.prefix+"word")},this.activate=function(e){return e?void(e.className==this.prefix+"line-start"?e.className=this.prefix+"line-start "+this.active:e.className=this.class_generator.setPrefix("wet-").mainClass(e.innerHTML).space().subClass(e.innerHTML).space().generate()+this.active):(console.log("activate - has error"),!1)},this.deactivate=function(t){var n=this.prefix+"line-start";if("string"!=typeof t)t.className.split(" ")[0]==n?(t.className=this.prefix+"line-start",console.log("sd")):(console.log("assd"),t.className=this.class_generator.setPrefix(this.prefix).mainClass(t.innerHTML).space().subClass(t.innerHTML).generate());else{var s=e.getElementsByClassName(t)[0];s=this.class_generator.setPrefix(this.prefix).mainClass(t.innerHTML).space().subClass(t.innerHTML).generate()}},this.setClass=function(e){return e?void(e.className=this.class_generator.setPrefix(this.prefix).mainClass(e.innerHTML).space().subClass(e.innerHTML).generate()):(console.log("deactivate - has error"),!1)},this.deactivatePreviouse=function(){var t=e.getElementsByClassName(this.active)[0],n=new Char_Class_Generator(this.prefix);void 0!=t&&(t.className.split(" ").indexOf(this.prefix+"line-start")>=0?t.className=this.prefix+"line-start":t.className=n.setPrefix(this.prefix).mainClass(t.innerHTML).space().subClass(t.innerHTML).generate())},this["delete"]=function(e){e.parentNode.removeChild(e)},this.plus=function(e,t){e.parentNode.insertBefore(t,e.nextSibling)},this.create=function(e,t,n){return"line-start"==e?this.createLineStart(t,n):"word"==e?this.createWord(t,n):"char"==e?this.createChar(t,n):"space"==e?this.createSpace(n):void 0},this.createLineStart=function(e,t){var n=document.createElement("span");n.className=this.prefix+"line-start","active"==t&&(n.className+=" "+this.active);var s=document.createTextNode(e);return n.appendChild(s),n},this.createWord=function(e,t){var n=document.createElement("span");"active"==t?n.className="wet-word parent":n.className="wet-word";var s=document.createTextNode(e),r=document.createElement("span");return"active"==t?r.className=this.class_generator.setPrefix("wet-").mainClass(e).space().subClass(e).generate()+"active":r.className=this.class_generator.setPrefix("wet-").mainClass(e).space().subClass(e).generate(),r.appendChild(s),n.appendChild(r),n},this.createChar=function(e,t){var n=document.createTextNode(e),s=document.createElement("span");return"active"==t?s.className=this.class_generator.setPrefix("wet-").mainClass(e).space().subClass(e).generate()+"active":s.className=this.class_generator.setPrefix("wet-").mainClass(e).space().subClass(e).generate(),s.appendChild(n),s},this.createSpace=function(e){var t=document.createElement("span");return"active"==e?t.className=this.class_generator.setPrefix("wet-").mainClass(" ").space().subClass(" ").space().generate()+"active":t.className=this.class_generator.setPrefix("wet-").mainClass(" ").space().subClass(" ").generate(),t.innerHTML=" ",t}}return e}(),first=new Editor("someeditor",{console:!0}),second=new Editor("someeditor_another",{console:!1});Module.getInstance().key=function(e){var t=new Char_Class_Generator("wet-"),n=(new Module.getInstance,e.object.container[e.index]),s=e.object.current_line[e.index],r=e.object.symbol_buffer[e.index].value,i=e.object.line[e.index][s],a=new Divider,c=new Director(n,"wet-","active");if(""==i.innerHTML){c.deactivatePreviouse();var o=c.create("line-start"," ","active");i.innerHTML+=o.outerHTML}if(""!=r){var l=c.getCursorEntity("active");if(l)var d=l.className.split(" ")[0];else var d="";"wet-line-start"==d&&(l.className="wet-line-start");var u=l.nextSibling,h=t.mainClass(r).generate();if("character"==h)if(0==c.isThereAnyActiveWords()){if(null==u){var f=c.getBeforeEntity("active"),v=c.create("word",r,"active");c.deactivatePreviouse(),i.appendChild(v)}else if(null!=u&&c.isWord(u)){var p=c.getCursorEntity("active"),m=p.nextSibling,_=a.divide(m),g=c.create("char",r,"active");m.innerHTML=g.outerHTML+_,m.className="wet-word parent",c.deactivatePreviouse()}}else{var f=c.getCursorEntity("active");c.deactivate(l),v=c.getParentWord();var g=(document.createTextNode(r),c.create("char",r,"active"));c.deactivatePreviouse(),null==f.nextSibling?v.appendChild(g):null!=f.nextSibling&&c.plus(f,g)}e.object.symbol_buffer[e.index].value=""}};var module=new Module.getInstance;module.addFunction("key","key"),Module.getInstance().backspase=function(e){var t=(new Char_Class_Generator("wet-"),e.object.container[e.index]),n=new Divider,s=new Director(t,"wet-","active"),r=s.getCursorEntity("active"),i=s.getBeforeEntity(r);if(i)if(s.isCursorBeforeWord(r)){s.makeItParentWord(i);var a=s.getParentWord();a.innerHTML=n.divide(a);var c=s.getLastElement(a);s.activate(c),s["delete"](r)}else s["delete"](r),s.activate(i);else if(0!=s.getParentWord()&&"wet-line-start"!=s.getParentWord().previousSibling.className){var a=s.getParentWord(),o=s.getBeforeEntity(a);s.activate(o),s["delete"](a)}else if(0!=s.getParentWord()&&"wet-line-start"==s.getParentWord().previousSibling.className){var a=s.getParentWord(),o=s.getBeforeEntity(a);o.className="wet-line-start active",s["delete"](a)}else if(s.isStart(r)){var l=r.parentNode,d=s.getBeforeEntity(l);if(0!=d){s["delete"](l),e.object.current_line[e.index]--,a=d.childNodes[d.childNodes.length-1],s.isSignifier(a)||(a.innerHTML=n.divide(a));var u=s.getLastElement(d);s.activate(u);var r=s.getCursorEntity("active"),h=s.getBeforeEntity(r);if(0!=h&&s.isWord(r)){r.className="wet-word parent";var f=r.childNodes.length-1,v=r.childNodes[f];s.activate(v)}}}};var module=new Module.getInstance;module.addFunction("8","backspase"),Module.getInstance().left_arrow=function(e){var t=(new Char_Class_Generator("wet-"),e.object.container[e.index]),n=new Divider,s=new Director(t,"wet-","active"),r=s.getCursorEntity("active"),i=s.getBeforeEntity(r);if(0!=i)if(s.isStart(i))s.deactivate(r),s.activate(i);else if(s.isWord(i)){s.makeItParentWord(i),c=s.getParentWord(),c.innerHTML=n.divide(c);var a=s.getLastElement(i);s.activate(a),s.deactivate(r)}else s.deactivate(r),s.activate(i);else if(0!=s.getParentWord()&&"wet-line-start"!=s.getParentWord().previousSibling.className){var c=s.getParentWord(),o=s.getBeforeEntity(c);s.activate(o),s.deactivate(r),c.innerHTML=n.concat(c),c.className="wet-word"}else if(0!=s.getParentWord()&&"wet-line-start"==s.getParentWord().previousSibling.className){var c=s.getParentWord(),o=s.getBeforeEntity(c);s.activate(o),s.deactivate(r),c.innerHTML=n.concat(c),s.makeItWord(c)}else if(s.isCursorFirstOnALine("active")){var l=r.parentNode,d=s.getBeforeEntity(l);if(0!=d){s.deactivate("active"),e.object.current_line[e.index]--,c=d.childNodes[d.childNodes.length-1],0==s.isSignifier(c)&&(c.innerHTML=n.divide(c));var u=s.getLastElement(d);s.activate(u);var r=s.getCursorEntity("active"),i=s.getBeforeEntity(r);if(0!=i&&s.isWord(r)){s.makeItParentWord(r);var h=s.getLastElement(r);s.activate(h)}}}};var module=new Module.getInstance;module.addFunction("37","left_arrow"),Module.getInstance().space=function(e){var t=(new Char_Class_Generator("wet-"),e.object.container[e.index]),n=new Divider,s=new Director(t,"wet-","active"),r=s.getParentWord(),i=s.getCursorEntity("active"),a=e.object.current_line[e.index]-1;i||(i=document.getElementsByClassName("wet-line-start")[a]);var c=0,o=i.parentElement.childNodes.length||!1,l=s.create("space"," ","active");if(c=0!=o?s.getCursorPosition(i):!1,c==o-1)r?(this.deletePrevioseCursor(t),void 0!=r&&(r.innerHTML=n.concat(r)),this.deletePrevioseParent(t),r.parentNode.insertBefore(l,r.nextSibling)):(this.deletePrevioseCursor(t),i.parentElement.appendChild(l));else if(o-1>c|1==c)if(0!=r){var d=n.bisect(r),u=document.createElement("span");u.className="wet-word",u.innerHTML=d[0];var h=document.createElement("span");h.className="wet-word",h.innerHTML=d[1],h.innerHTML=n.concat(h),r.parentNode.insertBefore(l,r.nextSibling),r.innerHTML=n.concat(u),i=t.getElementsByClassName("active")[0],i.parentNode.insertBefore(h,i.nextSibling),this.deletePrevioseParent(t)}else s.isCursorBeforeWord(i)?(i.parentNode.insertBefore(l,i.nextSibling),s.deactivate(i)):(this.deletePrevioseCursor(t),i.nextSibling?i.parentNode.insertBefore(l,i.nextSibling):i.parentElement.appendChild(l))};var module=new Module.getInstance;module.addFunction("32","space"),Module.getInstance().enter=function(e){var t=(new Char_Class_Generator("wet-"),e.object.container[e.index]),n=new Divider,s=new Director(t),r=t.getElementsByClassName("parent")[0];t.getElementsByClassName("active")[0];if(s.isThereAnyActiveWords("parent"));else{this.deletePrevioseCursor(t),r&&(r.innerHTML=n.concat(r)),this.deletePrevioseParent(t),e.object.current_line[e.index]++,e.object.line[e.index][e.object.current_line[e.index]]=document.createElement("div"),e.object.line[e.index][e.object.current_line[e.index]].className="line",e.object.line[e.index][e.object.current_line[e.index]].setAttribute("line_number",e.object.current_line[e.index]);var i=document.createElement("span");i.className="wet-line-start active",i.innerHTML="",e.object.line[e.index][e.object.current_line[e.index]].appendChild(i),e.object.work_space[e.index].appendChild(e.object.line[e.index][e.object.current_line[e.index]])}};var module=new Module.getInstance;module.addFunction("13","enter");
//# sourceMappingURL=app.min.js.map