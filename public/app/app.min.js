"use strict";var Editor=function(){function e(e,t){function s(e){return!1}if(void 0!=e){this.editor_name=e,this.container=new Array,this.work_space=new Array,this.symbol_buffer=new Array,this.console=new Array,this.line=new Array,this.current_line=new Array,void 0!=Observable&&(Observable.apply(this,arguments),this.subscribe(Key_Observer));for(var n=0;n<document.getElementsByClassName(this.editor_name).length;n++)this.container[n]=document.getElementsByClassName(this.editor_name)[n],this.container[n].style.position="relative",this.symbol_buffer[n]=document.createElement("textarea"),this.symbol_buffer[n].className="symbol_buffer",this.symbol_buffer[n].cols="1",this.symbol_buffer[n].rows="1",this.symbol_buffer[n].style.opacity="0",this.container[n].appendChild(this.symbol_buffer[n]),this.work_space[n]=document.createElement("div"),this.work_space[n].className="result",this.work_space[n].style.border="1px solid #000",this.work_space[n].style.height="500px",this.work_space[n].onselectstart=function(){return!1},this.work_space[n].onmousedown=s,this.container[n].appendChild(this.work_space[n]),this.line[n]=new Array,this.current_line[n]=1,this.line[n][this.current_line[n]]=document.createElement("div"),this.line[n][this.current_line[n]].className="line",this.line[n][this.current_line[n]].setAttribute("line_number",this.current_line[n]),this.work_space[n].appendChild(this.line[n][this.current_line[n]]),1==t.console&&(this.console[n]=document.createElement("div"),this.console[n].className="console",this.console[n].style.border="1px solid #000",this.console[n].style.position="absolute",this.console[n].style.top="0px",this.console[n].style.right="0px",this.console[n].style.width="200px",this.console[n].style.height="50px",this.container[n].appendChild(this.console[n])),this.work_space[n].object=this,this.work_space[n].index=n,this.work_space[n].key_scope=Key_Scope.getInstance(),this.work_space[n].onclick=function(){this.object.symbol_buffer[this.index].focus()},this.symbol_buffer[n].object=this,this.symbol_buffer[n].index=n,this.symbol_buffer[n].key_scope=Key_Scope.getInstance(),this.symbol_buffer[n].onkeydown=function(e){void 0!=Observable&&this.object.publish(this.object,this.key_scope,this.index,e,"pressed")},this.symbol_buffer[n].onkeyup=function(e){void 0!=Observable&&this.object.publish(this.object,this.key_scope,this.index,e,"relised")},this.symbol_buffer[n].onblur=function(){this.key_scope.clearKeyMap()}}else console.log("sorry but you have not add any name to editors name field")}return e}(),Char_Class_Generator=function(){function e(e){return r=e,i=r.charCodeAt(0),47>=i||i>=58&&64>=i||i>=91&&96>=i||i>=122&&126>=i?c=o+"signifier":i>=48&&57>=i?c=o+"numeral":(i>=65&&90>=i||i>=97&&122>=i)&&(c=o+"character"),this}function t(e){r=e,i=r.charCodeAt(0);for(var t=[{start_code:32,end_code:32,desc:"space"},{start_code:33,end_code:33,desc:"exclamation"},{start_code:34,end_code:34,desc:"quotation "},{start_code:35,end_code:35,desc:"hash"},{start_code:36,end_code:36,desc:"dollar"},{start_code:37,end_code:37,desc:"percent"},{start_code:38,end_code:38,desc:"ampersand"},{start_code:39,end_code:39,desc:"apostrophe"},{start_code:40,end_code:40,desc:"left_parenthesis"},{start_code:41,end_code:41,desc:"right_parenthesis"},{start_code:42,end_code:42,desc:"asterix"},{start_code:43,end_code:43,desc:"plus"},{start_code:44,end_code:44,desc:"comma"},{start_code:45,end_code:45,desc:"hyphen"},{start_code:46,end_code:46,desc:"period"},{start_code:47,end_code:47,desc:"slash"},{start_code:58,end_code:58,desc:"colon"},{start_code:59,end_code:59,desc:"semicolon"},{start_code:60,end_code:60,desc:"less_than"},{start_code:61,end_code:61,desc:"equals"},{start_code:62,end_code:62,desc:"greater_than"},{start_code:63,end_code:63,desc:"question"},{start_code:64,end_code:64,desc:"at"},{start_code:65,end_code:90,desc:"uppercase"},{start_code:91,end_code:91,desc:"left_square_vrecket"},{start_code:92,end_code:92,desc:"backslash"},{start_code:93,end_code:93,desc:"right_square_vrecket"},{start_code:94,end_code:94,desc:"caret"},{start_code:95,end_code:95,desc:"underscore"},{start_code:96,end_code:96,desc:"grave_accent"},{start_code:123,end_code:123,desc:"left_curly_brace"},{start_code:124,end_code:124,desc:"vertical_bar"},{start_code:125,end_code:125,desc:"left_curly_brace"},{start_code:126,end_code:126,desc:"tilda"}],s=0;s<t.length;s++)c+=i==t[s].start_code?o+t[s].desc:i>=t[s].start_code&&i<=t[s].start_code?o+t[s].desc:"";return this}function s(e){return o=e||"",this}function n(){return c+=" ",this}function a(){return c}var r="",i="",c="",o="";return{mainClass:e,subClass:t,generate:a,setPrefix:s,space:n}},Observable=function(){this.subscribers=new Array,this.subscribe=function(e){this.subscribers.push(e)},this.unsubscribe=function(e){for(var t=0;t<this.subscribers.length;t++)if(this.subscribers[t]===e)return void this.subscribers[t].splice(t,1)},this.publish=function(e,t,s,n,a){for(var r=0;r<this.subscribers.length;r++)this.subscribers[r](e,t,s,n,a)}},Key_Observer=function(e,t,s,n,a){function r(){void 0!=document.getElementsByClassName("active")[0]&&(document.getElementsByClassName("active")[0].className=c.setPrefix("wet-").mainClass(document.getElementsByClassName("active")[0].innerHTML).space().subClass(document.getElementsByClassName("active")[0].innerHTML).generate())}function i(){void 0!=document.getElementsByClassName("parent")[0]&&(document.getElementsByClassName("parent")[0].className="wet-word")}var c=new Char_Class_Generator("wet-"),o=new Module.getInstance;if(t.getKeyMap()[0]<"46"&&(n.preventDefault(),n.stopPropagation()),""==e.line[s][e.current_line[s]].innerHTML){r();var l=document.createElement("span");l.origin_class_name="wet-line-start",l.className=l.origin_class_name+" active";var d=document.createTextNode(" ");l.appendChild(d),e.line[s][e.current_line[s]].innerHTML=e.line[s][e.current_line[s]].innerHTML+l.outerHTML}if(""!=e.symbol_buffer[s].value){var u=document.getElementsByClassName("active")[0],m=u?u.className.split(" ")[0]:"";if("wet-line-start"==m&&(u.className="wet-line-start"),"character"==c.mainClass(e.symbol_buffer[s].value).generate())if(0==document.getElementsByClassName("parent").length){r();var _=document.createElement("span");_.className="wet-word parent";var h=document.createTextNode(e.symbol_buffer[s].value),p=document.createElement("span");p.className=c.setPrefix("wet-").mainClass(e.symbol_buffer[s].value).space().subClass(e.symbol_buffer[s].value).generate()+"active",p.appendChild(h),_.appendChild(p),e.line[s][e.current_line[s]].appendChild(_)}else{u.className=c.setPrefix("wet-").mainClass(e.symbol_buffer[s].value).space().subClass(e.symbol_buffer[s].value).generate(),_=document.getElementsByClassName("parent")[0];var h=document.createTextNode(e.symbol_buffer[s].value),p=document.createElement("span");p.className=c.setPrefix("wet-").mainClass(e.symbol_buffer[s].value).space().subClass(e.symbol_buffer[s].value).generate()+"active",p.appendChild(h),_.appendChild(p)}else if(t.getKeyMap().indexOf(32)>=0){r(),i();var f=document.createElement("span");f.className=c.setPrefix("wet-").subClass(" ").generate()+" active",f.innerHTML=" ",e.line[s][e.current_line[s]].appendChild(f)}e.symbol_buffer[s].value=""}13==t.getKeyMap()&&(r(),i(),e.current_line[s]++,e.line[s][e.current_line[s]]=document.createElement("div"),e.line[s][e.current_line[s]].className="line",e.line[s][e.current_line[s]].setAttribute("line_number",e.current_line[s]),e.work_space[s].appendChild(e.line[s][e.current_line[s]])),"pressed"==a?(o.setOptions({object:e,index:s}),o.runFunction(t.getStringKeyMap()),t.keyDown(n)):"relised"==a&&(o.runFunction(t.getStringKeyMap()),t.keyUp(n)),void 0!=e.console[s]&&(e.console[s].innerHTML=t.getKeyMap())},Key_Scope=function(){function e(){function e(e){if(0==c.length)c.push(e);else{for(var t=0;t<=c.length;t++)c[t]==e&&(o=!0);0==o&&c.push(e),o=!1}}function t(e){for(var t=0;t<=c.length;t++)c[t]==e&&c.splice(t,1)}function s(t){var s;window.event?s=t.keyCode:t.which&&(s=t.which),e(s)}function n(e){var s;window.event?s=e.keyCode:e.which&&(s=e.which),t(s)}function a(){return c.sort()}function r(){return c.sort().toString()}function i(){c=[]}var c=new Array,o=!1;return{keyDown:s,keyUp:n,getKeyMap:a,clearKeyMap:i,getStringKeyMap:r}}var t;return{getInstance:function(){return t||(t=e()),t}}}(),Module=function(){function e(){function e(e,t){r[e]={function_name:t}}function t(){return console.log(r),r}function s(e){e>0&&void 0!=r[e]&&(this[r[e].function_name](a)||"")}function n(e){a=e}var a,r={8:{function_name:"backspase"},9:{function_name:"tab"}};return{addFunction:e,dump:t,runFunction:s,key_assotiation:r,setOptions:n}}var t;return{getInstance:function(){return t||(t=e()),t}}}();Module.getInstance().backspase=function(e){var t=new Char_Class_Generator("wet-"),s=document.getElementsByClassName("active")[0],n=document.getElementsByClassName("active")[0].previousSibling;if(null!=n)if("wet-line-start"==n.className.split(" ")[0]){var a=document.getElementsByClassName("active")[0].previousSibling.className.trim();s.parentNode.removeChild(s),n.className=a+" active"}else if("wet-word"==n.className.split(" ")[0]){n.className="wet-word parent";var r=n.childNodes[n.childNodes.length-1];r.className=t.setPrefix("wet-").mainClass(r.innerHTML).space().subClass(r.innerHTML).generate()+" active",s.parentNode.removeChild(s)}else{var a=document.getElementsByClassName("active")[0].previousSibling.className.trim();s.parentNode.removeChild(s),n.className=a+" active"}else if(void 0!=document.getElementsByClassName("parent")[0]&&"wet-line-start"!=document.getElementsByClassName("parent")[0].previousSibling.className){var i=document.getElementsByClassName("parent")[0],c=i.previousSibling;c.className=t.setPrefix("wet-").mainClass(c.innerHTML).space().subClass(c.innerHTML).generate()+" active",i.parentNode.removeChild(i)}else if(void 0!=document.getElementsByClassName("parent")[0]&&"wet-line-start"==document.getElementsByClassName("parent")[0].previousSibling.className){var i=document.getElementsByClassName("parent")[0],c=i.previousSibling;c.className="wet-line-start active",i.parentNode.removeChild(i)}else if("wet-line-start"==s.className.split(" ")[0]){var o=s.parentNode,l=o.previousSibling;if(null!=l){o.parentNode.removeChild(o),e.object.current_line[e.index]=e.object.current_line[e.index]-1,l.childNodes[l.childNodes.length-1].className=l.childNodes[l.childNodes.length-1].className+" active";var s=document.getElementsByClassName("active")[0],n=document.getElementsByClassName("active")[0].previousSibling;null!=n&&"wet-word"==s.className.split(" ")[0]&&(s.className="wet-word parent",s.childNodes[s.childNodes.length-1].className=t.setPrefix("wet-").mainClass(s.childNodes[s.childNodes.length-1].innerHTML).space().subClass(s.childNodes[s.childNodes.length-1].innerHTML).generate()+" active")}}};var module=new Module.getInstance;module.addFunction("8","backspase");var first=new Editor("someeditor",{console:!0}),second=new Editor("someeditor_another",{console:!1});
//# sourceMappingURL=app.min.js.map