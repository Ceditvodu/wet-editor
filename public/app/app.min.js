"use strict";var Editor=function(){function e(e,t){function n(e){return!1}if(void 0!=e){this.editor_name=e,this.container=new Array,this.work_space=new Array,this.symbol_buffer=new Array,this.console=new Array,this.line=new Array,this.current_line=new Array,void 0!=Observable&&(Observable.apply(this,arguments),this.subscribe(Key_Observer));for(var r=0;r<document.getElementsByClassName(this.editor_name).length;r++){this.container[r]=document.getElementsByClassName(this.editor_name)[r],this.container[r].style.position="relative",this.symbol_buffer[r]=document.createElement("textarea"),this.symbol_buffer[r].className="symbol_buffer",this.symbol_buffer[r].cols="1",this.symbol_buffer[r].rows="1",this.symbol_buffer[r].style.opacity="0",this.container[r].appendChild(this.symbol_buffer[r]),this.work_space[r]=document.createElement("ol"),this.work_space[r].className="result",this.work_space[r].style.border="1px solid #000",this.work_space[r].style.height="500px",this.work_space[r].onselectstart=function(){return!1},this.work_space[r].onmousedown=n,this.container[r].appendChild(this.work_space[r]),this.line[r]=new Array,this.current_line[r]=1,this.line[r][this.current_line[r]]=document.createElement("li"),this.line[r][this.current_line[r]].className="wet-line",this.line[r][this.current_line[r]].setAttribute("line_number",this.current_line[r]),this.work_space[r].appendChild(this.line[r][this.current_line[r]]);var s=document.createElement("span");s.className="wet-line-start active",s.innerHTML="",this.line[r][this.current_line[r]].appendChild(s),1==t.console&&(this.console[r]=document.createElement("div"),this.console[r].className="console",this.console[r].style.border="1px solid #000",this.console[r].style.position="absolute",this.console[r].style.top="0px",this.console[r].style.right="0px",this.console[r].style.width="200px",this.console[r].style.height="50px",this.container[r].appendChild(this.console[r])),this.work_space[r].object=this,this.work_space[r].index=r,this.work_space[r].key_scope=Key_Scope.getInstance(),this.work_space[r].onclick=function(){this.object.symbol_buffer[this.index].focus()},this.symbol_buffer[r].object=this,this.symbol_buffer[r].index=r,this.symbol_buffer[r].key_scope=Key_Scope.getInstance(),this.symbol_buffer[r].onkeydown=function(e){void 0!=Observable&&this.object.publish(this.object,this.key_scope,this.index,e,"pressed")},this.symbol_buffer[r].onkeyup=function(e){void 0!=Observable&&this.object.publish(this.object,this.key_scope,this.index,e,"relised")},this.symbol_buffer[r].onblur=function(){this.key_scope.clearKeyMap()}}}else console.log("sorry but you have not add any name to editors name field")}return e}(),Char_Class_Generator=function(){function e(e){return i=e,a=i.charCodeAt(0),47>=a||a>=58&&64>=a||a>=91&&96>=a||a>=122&&126>=a?o=c+"signifier":a>=48&&57>=a?o=c+"numeral":(a>=65&&90>=a||a>=97&&122>=a)&&(o=c+"character"),e.length>=1&&"wet-line-start"==e&&(o="wet-line-start"),this}function t(e){i=e,a=i.charCodeAt(0);for(var t=[{start_code:32,end_code:32,desc:"space"},{start_code:33,end_code:33,desc:"exclamation"},{start_code:34,end_code:34,desc:"quotation "},{start_code:35,end_code:35,desc:"hash"},{start_code:36,end_code:36,desc:"dollar"},{start_code:37,end_code:37,desc:"percent"},{start_code:38,end_code:38,desc:"ampersand"},{start_code:39,end_code:39,desc:"apostrophe"},{start_code:40,end_code:40,desc:"left_parenthesis"},{start_code:41,end_code:41,desc:"right_parenthesis"},{start_code:42,end_code:42,desc:"asterix"},{start_code:43,end_code:43,desc:"plus"},{start_code:44,end_code:44,desc:"comma"},{start_code:45,end_code:45,desc:"hyphen"},{start_code:46,end_code:46,desc:"period"},{start_code:47,end_code:47,desc:"slash"},{start_code:58,end_code:58,desc:"colon"},{start_code:59,end_code:59,desc:"semicolon"},{start_code:60,end_code:60,desc:"less_than"},{start_code:61,end_code:61,desc:"equals"},{start_code:62,end_code:62,desc:"greater_than"},{start_code:63,end_code:63,desc:"question"},{start_code:64,end_code:64,desc:"at"},{start_code:65,end_code:90,desc:"uppercase"},{start_code:91,end_code:91,desc:"left_square_vrecket"},{start_code:92,end_code:92,desc:"backslash"},{start_code:93,end_code:93,desc:"right_square_vrecket"},{start_code:94,end_code:94,desc:"caret"},{start_code:95,end_code:95,desc:"underscore"},{start_code:96,end_code:96,desc:"grave_accent"},{start_code:123,end_code:123,desc:"left_curly_brace"},{start_code:124,end_code:124,desc:"vertical_bar"},{start_code:125,end_code:125,desc:"left_curly_brace"},{start_code:126,end_code:126,desc:"tilda"}],n=0;n<t.length;n++)o+=a==t[n].start_code?c+t[n].desc:a>=t[n].start_code&&a<=t[n].start_code?c+t[n].desc:"";return this}function n(e){return c=e||"",this}function r(){return o+=" ",this}function s(){return o}var i="",a="",o="",c="";return{mainClass:e,subClass:t,generate:s,setPrefix:n,space:r}},Observable=function(){this.subscribers=new Array,this.subscribe=function(e){this.subscribers.push(e)},this.unsubscribe=function(e){for(var t=0;t<this.subscribers.length;t++)if(this.subscribers[t]===e)return void this.subscribers[t].splice(t,1)},this.publish=function(e,t,n,r,s){for(var i=0;i<this.subscribers.length;i++)this.subscribers[i](e,t,n,r,s)}},Key_Observer=function(e,t,n,r,s){var i=(new Char_Class_Generator("wet-"),new Module.getInstance),a=e.container[n];e.line[n][e.current_line[n]],new Divider,new Director(a,"wet-");t.getKeyMap()[0]<"46"&&(r.preventDefault(),r.stopPropagation()),i.setOptions({object:e,index:n}),i.runFunction("key"),"pressed"==s?(i.setOptions({object:e,index:n}),i.runFunction(t.getStringKeyMap()),t.keyDown(r)):"relised"==s&&(i.runFunction(t.getStringKeyMap()),t.keyUp(r)),void 0!=e.console[n]&&(e.console[n].innerHTML=t.getKeyMap())},Key_Scope=function(){function e(){function e(e){if(0==o.length)o.push(e);else{for(var t=0;t<=o.length;t++)o[t]==e&&(c=!0);0==c&&o.push(e),c=!1}}function t(e){for(var t=0;t<=o.length;t++)o[t]==e&&o.splice(t,1)}function n(t){var n;window.event?n=t.keyCode:t.which&&(n=t.which),e(n)}function r(e){var n;window.event?n=e.keyCode:e.which&&(n=e.which),t(n)}function s(){return o.sort()}function i(){return o.sort().toString()}function a(){o=[]}var o=new Array,c=!1;return{keyDown:n,keyUp:r,getKeyMap:s,clearKeyMap:a,getStringKeyMap:i}}var t;return{getInstance:function(){return t||(t=e()),t}}}(),Module=function(){function e(){function e(e){var t=e.getElementsByClassName("active")[0],n=new Char_Class_Generator("wet-");void 0!=t&&(t.className.split(" ").indexOf("wet-line-start")>=0?t.className="wet-line-start":t.className=n.setPrefix("wet-").mainClass(t.innerHTML).space().subClass(t.innerHTML).generate())}function t(e){var t=e.getElementsByClassName("parent")[0];void 0!=t&&(t.className="wet-word")}function n(e,t){o[e]={function_name:t}}function r(){return console.log(o),o}function s(e){(e>0||"key"==e)&&void 0!=o[e]&&(this[o[e].function_name](a)||"")}function i(e){a=e}var a,o={8:{function_name:"backspase"},9:{function_name:"tab"}};return{addFunction:n,dump:r,runFunction:s,key_assotiation:o,setOptions:i,deletePrevioseCursor:e,deletePrevioseParent:t}}var t;return{getInstance:function(){return t||(t=e()),t}}}(),Divider=function(){function e(){this.divide=function(e){for(var t=e.innerHTML,n="",r=t.split(""),s=new Char_Class_Generator("wet-"),i=0;i<r.length;i++)n+='<span class="'+s.setPrefix("wet-").mainClass(r[i]).space().subClass(r[i]).generate()+'">'+r[i]+"</span>";return n},this.concat=function(e){if(void 0!=e){var t=e.innerHTML,n=/(<([^>]+)>)/gi;return t=t.replace(n,"")}return""},this.bisect=function(e){var t=new Array;t[0]="",t[1]="";var n=0;if(void 0!=e){for(var r=0;r<=e.childNodes.length-1;r++){var s=e.childNodes[r].className.split(" ").indexOf("active");t[n]+=e.childNodes[r].outerHTML,s>=0&&(n=1)}return t}return t}}return e}(),Director=function(){function e(e,t,n){this.concrete_entity=e,this.prefix=t,this.active=n,this.class_generator=new Char_Class_Generator(this.prefix),this.isThereAnyActiveWords=function(){var e=this.concrete_entity.getElementsByClassName("parent")[0]||!1;return!!e},this.isCursorFirstOnALine=function(e){var t=this.getCursorEntity(e),n=t.previousSibling||!1;return console.log(n),n?!1:t.className.split(" ").indexOf(this.prefix+"line-start")>=0?(console.log("cool"),!0):(console.log("notcool"),!1)},this.isCursorBeforeWord=function(e){var t=e.previousSibling,n=t.className.split(" ").indexOf(this.prefix+"word");return n>=0},this.isStart=function(e){return e?e.className.split(" ")[0]==this.prefix+"line-start":!1},this.isSignifier=function(e){return e?e.className.split(" ").indexOf(this.prefix+"signifier")>=0:!1},this.isWord=function(e){return e?e.className.split(" ").indexOf(this.prefix+"word")>=0:!1},this.isParentWord=function(e){return e?e.className.split(" ").indexOf("parent")>=0:!1},this.isCharacter=function(e){var t=this.prefix+"character";return e?e.className.split(" ").indexOf(t)>=0:!1},this.isCursoreBeforeWord=function(e){var t=this.prefix+"word";return e?e.nextSibling.className.split(" ").indexOf(t)>=0:!1},this.getCursorEntity=function(e){var t=this.concrete_entity.getElementsByClassName(e)[0]||!1;return t?t:(console.log("getCursorEntity - has error"),!1)},this.getBeforeEntity=function(e){var t=e.previousSibling||!1;return t?t:!1},this.getParentWord=function(){var e=this.concrete_entity.getElementsByClassName("parent")[0]||!1;return e?e:!1},this.getLastElement=function(e){var t=e.childNodes[e.childNodes.length-1]||!1;return t?t:!1},this.getCursorPosition=function(e){for(var t=0,n=0;n<e.parentElement.childNodes.length-1;n++){var r=e.parentElement.childNodes[n].className,s=r.split(" ");if(s.indexOf("active")>=0)break;t++}return t},this.getAllAfter=function(e){for(var t=[];e.nextSibling;)e=e.nextSibling,t.push(e.outerHTML);return t},this.makeItParentWord=function(e){e&&(e.className=this.prefix+"word parent")},this.makeItWord=function(e){e&&(e.className=this.prefix+"word")},this.activate=function(e){return e?void(e.className==this.prefix+"line-start"?e.className=this.prefix+"line-start "+this.active:e.className==this.prefix+"word"?e.className=this.prefix+"word parent":e.className=this.class_generator.setPrefix("wet-").mainClass(e.innerHTML).space().subClass(e.innerHTML).space().generate()+this.active):(console.log("activate - has error"),!1)},this.deactivate=function(t){var n=this.prefix+"line-start";if("string"!=typeof t)t.className.split(" ")[0]==n?t.className=this.prefix+"line-start":t.className=this.class_generator.setPrefix(this.prefix).mainClass(t.innerHTML).space().subClass(t.innerHTML).generate();else{var r=e.getElementsByClassName(t)[0];r=this.class_generator.setPrefix(this.prefix).mainClass(t.innerHTML).space().subClass(t.innerHTML).generate()}},this.setClass=function(e){return e?void(e.className=this.class_generator.setPrefix(this.prefix).mainClass(e.innerHTML).space().subClass(e.innerHTML).generate()):(console.log("deactivate - has error"),!1)},this.deactivatePreviouse=function(){var t=e.getElementsByClassName(this.active)[0],n=new Char_Class_Generator(this.prefix);void 0!=t&&(t.className.split(" ").indexOf(this.prefix+"line-start")>=0?t.className=this.prefix+"line-start":t.className=n.setPrefix(this.prefix).mainClass(t.innerHTML).space().subClass(t.innerHTML).generate())},this["delete"]=function(e){e.parentNode.removeChild(e)},this.plus=function(e,t){e.parentNode.insertBefore(t,e.nextSibling)},this.deleteAllAfter=function(e){for(var t=[];e.nextSibling;)e=e.nextSibling,t.push(e);for(var n=0;n<t.length;n++)this["delete"](t[n])},this.cutAllAfter=function(e){for(var t=[];e.nextSibling;)e=e.nextSibling,t.push(e),this["delete"](e);for(var n=0;n<t.length;n++)this["delete"](t[n]),t[n]=t[n].outerHTML;return t},this.create=function(e,t,n){return"line-start"==e?this.createLineStart(t,n):"word"==e?this.createWord(t,n):"char"==e?this.createChar(t,n):"space"==e?this.createSpace(n):"line"==e?this.createLine(t,n):void 0},this.createLineStart=function(e,t){var n=document.createElement("span");n.className=this.prefix+"line-start","active"==t&&(n.className+=" "+this.active);var r=document.createTextNode(e);return n.appendChild(r),n},this.createWord=function(e,t){var n=document.createElement("span");if("active"==t){n.className="wet-word parent";var r=document.createTextNode(e),s=document.createElement("span")}else{n.className="wet-word";var s=e}return"active"==t?(s.className=this.class_generator.setPrefix("wet-").mainClass(e).space().subClass(e).generate()+"active",s.appendChild(r),n.appendChild(s)):n.innerHTML=s,n},this.createChar=function(e,t){var n=document.createTextNode(e),r=document.createElement("span");return"active"==t?r.className=this.class_generator.setPrefix("wet-").mainClass(e).space().subClass(e).generate()+"active":r.className=this.class_generator.setPrefix("wet-").mainClass(e).space().subClass(e).generate(),r.appendChild(n),r},this.createSpace=function(e){var t=document.createElement("span");return"active"==e?t.className=this.class_generator.setPrefix("wet-").mainClass(" ").space().subClass(" ").space().generate()+"active":t.className=this.class_generator.setPrefix("wet-").mainClass(" ").space().subClass(" ").generate(),t.innerHTML=" ",t},this.createLine=function(e,t){var n=document.createElement("li");return n.className=this.prefix+"line",n.setAttribute("line_number",t),"string"==typeof e?n.innerHTML=e:n.appendChild(e),n}}return e}(),first=new Editor("someeditor",{console:!0}),second=new Editor("someeditor_another",{console:!1});Module.getInstance().key=function(e){var t=new Char_Class_Generator("wet-"),n=(new Module.getInstance,e.object.container[e.index]),r=e.object.current_line[e.index],s=e.object.symbol_buffer[e.index].value,i=e.object.line[e.index][r],a=new Divider,o=new Director(n,"wet-","active");if(""==i.innerHTML){o.deactivatePreviouse();var c=o.create("line-start"," ","active");i.innerHTML+=c.outerHTML}if(""!=s){var l=o.getCursorEntity("active");if(l)var d=l.className.split(" ")[0];else var d="";"wet-line-start"==d&&(l.className="wet-line-start");var u=l.nextSibling,h=t.mainClass(s).generate();if("character"==h)if(0==o.isThereAnyActiveWords()){if(null==u){var f=o.getBeforeEntity("active"),v=o.create("word",s,"active");o.deactivatePreviouse(),i.appendChild(v)}else if(null!=u&&o.isWord(u)){var p=o.getCursorEntity("active"),m=p.nextSibling,_=a.divide(m),g=o.create("char",s,"active");m.innerHTML=g.outerHTML+_,m.className="wet-word parent",o.deactivatePreviouse()}}else{var f=o.getCursorEntity("active");o.deactivate(l),v=o.getParentWord();var g=(document.createTextNode(s),o.create("char",s,"active"));o.deactivatePreviouse(),null==f.nextSibling?v.appendChild(g):null!=f.nextSibling&&o.plus(f,g)}e.object.symbol_buffer[e.index].value=""}};var module=new Module.getInstance;module.addFunction("key","key"),Module.getInstance().backspase=function(e){var t=(new Char_Class_Generator("wet-"),e.object.container[e.index]),n=new Divider,r=new Director(t,"wet-","active"),s=r.getCursorEntity("active"),i=r.getBeforeEntity(s);if(i)if(r.isCursorBeforeWord(s)){r.makeItParentWord(i);var a=r.getParentWord();a.innerHTML=n.divide(a);var o=r.getLastElement(a);r.activate(o),r["delete"](s)}else r["delete"](s),r.activate(i);else if(0!=r.getParentWord()&&"wet-line-start"!=r.getParentWord().previousSibling.className){var a=r.getParentWord(),c=r.getBeforeEntity(a);r.activate(c),r["delete"](a)}else if(0!=r.getParentWord()&&"wet-line-start"==r.getParentWord().previousSibling.className){var a=r.getParentWord(),c=r.getBeforeEntity(a);c.className="wet-line-start active",r["delete"](a)}else if(r.isStart(s)){var l=s.parentNode,d=r.getBeforeEntity(l);if(0!=d){r["delete"](l),e.object.current_line[e.index]--,a=d.childNodes[d.childNodes.length-1],r.isSignifier(a)||(a.innerHTML=n.divide(a));var u=r.getLastElement(d);r.activate(u);var s=r.getCursorEntity("active"),h=r.getBeforeEntity(s);if(0!=h&&r.isWord(s)){s.className="wet-word parent";var f=s.childNodes.length-1,v=s.childNodes[f];r.activate(v)}}}};var module=new Module.getInstance;module.addFunction("8","backspase"),Module.getInstance().left_arrow=function(e){var t=(new Char_Class_Generator("wet-"),e.object.container[e.index]),n=new Divider,r=new Director(t,"wet-","active"),s=r.getCursorEntity("active"),i=r.getBeforeEntity(s);if(0!=i)if(r.isStart(i))r.deactivate(s),r.activate(i);else if(r.isWord(i)){r.makeItParentWord(i),o=r.getParentWord(),o.innerHTML=n.divide(o);var a=r.getLastElement(i);r.activate(a),r.deactivate(s)}else r.deactivate(s),r.activate(i);else if(0!=r.getParentWord()&&"wet-line-start"!=r.getParentWord().previousSibling.className){var o=r.getParentWord(),c=r.getBeforeEntity(o);r.activate(c),r.deactivate(s),o.innerHTML=n.concat(o),o.className="wet-word"}else if(0!=r.getParentWord()&&"wet-line-start"==r.getParentWord().previousSibling.className){var o=r.getParentWord(),c=r.getBeforeEntity(o);r.activate(c),r.deactivate(s),o.innerHTML=n.concat(o),r.makeItWord(o)}else if(r.isCursorFirstOnALine("active")){var l=s.parentNode,d=r.getBeforeEntity(l);if(0!=d){r.deactivate(s),e.object.current_line[e.index]--,o=d.childNodes[d.childNodes.length-1],0==r.isSignifier(o)&&(o.innerHTML=n.divide(o));var u=r.getLastElement(d);if(r.isWord(u)){r.makeItParentWord(u);var h=r.getLastElement(u);r.activate(h)}else r.activate(u);var s=r.getCursorEntity("active"),i=r.getBeforeEntity(s);if(0!=i&&r.isWord(s)){r.makeItParentWord(s);var h=r.getLastElement(s);console.log(h),r.activate(h)}}}};var module=new Module.getInstance;module.addFunction("37","left_arrow"),Module.getInstance().space=function(e){var t=(new Char_Class_Generator("wet-"),e.object.container[e.index]),n=new Divider,r=new Director(t,"wet-","active"),s=r.getParentWord(),i=r.getCursorEntity("active"),a=e.object.current_line[e.index]-1;i||(i=document.getElementsByClassName("wet-line-start")[a]);var o=0,c=i.parentElement.childNodes.length||!1,l=r.create("space"," ","active");if(o=0!=c?r.getCursorPosition(i):!1,o==c-1)s?(this.deletePrevioseCursor(t),void 0!=s&&(s.innerHTML=n.concat(s)),this.deletePrevioseParent(t),s.parentNode.insertBefore(l,s.nextSibling)):(this.deletePrevioseCursor(t),i.parentElement.appendChild(l));else if(c-1>o|1==o)if(0!=s){var d=n.bisect(s),u=document.createElement("span");u.className="wet-word",u.innerHTML=d[0];var h=document.createElement("span");h.className="wet-word",h.innerHTML=d[1],h.innerHTML=n.concat(h),s.parentNode.insertBefore(l,s.nextSibling),s.innerHTML=n.concat(u),i=t.getElementsByClassName("active")[0],i.parentNode.insertBefore(h,i.nextSibling),this.deletePrevioseParent(t)}else r.isCursorBeforeWord(i)?(i.parentNode.insertBefore(l,i.nextSibling),r.deactivate(i)):(this.deletePrevioseCursor(t),i.nextSibling?i.parentNode.insertBefore(l,i.nextSibling):i.parentElement.appendChild(l))};var module=new Module.getInstance;module.addFunction("32","space"),Module.getInstance().enter=function(e){var t=(new Char_Class_Generator("wet-"),e.object.container[e.index]),n=new Divider,r=new Director(t,"wet-","active"),s=t.getElementsByClassName("parent")[0],i=t.getElementsByClassName("active")[0];if(r.isThereAnyActiveWords("parent")){var a=0,o=i.parentElement.childNodes.length||!1;if(a=0!=o?r.getCursorPosition(i):!1,a==o-1){s.innerHTML=n.concat(s),this.deletePrevioseCursor(t),this.deletePrevioseParent(t),e.object.current_line[e.index]++;var c=e.object.current_line[e.index],l=r.create("line-start","","active"),d=r.create("line",l,c);e.object.line[e.index][c]=d,e.object.work_space[e.index].appendChild(e.object.line[e.index][c])}else{var u=n.bisect(s),h=u[0],f=u[1];s.innerHTML=h;var v=r.getAllAfter(s);v=v.join(""),r.deleteAllAfter(s),f=r.create("word",f),f=n.concat(f);var p=f+v;e.object.current_line[e.index]++;var c=e.object.current_line[e.index],m=r.create("line-start","","active");m=m.outerHTML+p;var d=r.create("line",m,c);e.object.line[e.index][c]=d,e.object.work_space[e.index].appendChild(e.object.line[e.index][c]),this.deletePrevioseCursor(t),s.innerHTML=n.concat(s),this.deletePrevioseParent(t)}}else{this.deletePrevioseCursor(t),s&&(s.innerHTML=n.concat(s)),this.deletePrevioseParent(t),e.object.current_line[e.index]++;var c=e.object.current_line[e.index],l=r.create("line-start","","active"),d=r.create("line",l,c);e.object.line[e.index][c]=d,e.object.work_space[e.index].appendChild(e.object.line[e.index][c])}};var module=new Module.getInstance;module.addFunction("13","enter");
//# sourceMappingURL=app.min.js.map