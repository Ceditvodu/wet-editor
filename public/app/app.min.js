"use strict";var Editor=function(){function e(e,s){function t(e){return!1}if(void 0!=e){this.editor_name=e,this.container=new Array,this.work_space=new Array,this.symbol_buffer=new Array,this.console=new Array,this.line=new Array,this.current_line=new Array,void 0!=Observable&&(Observable.apply(this,arguments),this.subscribe(Key_Observer));for(var n=0;n<document.getElementsByClassName(this.editor_name).length;n++)this.container[n]=document.getElementsByClassName(this.editor_name)[n],this.container[n].style.position="relative",this.symbol_buffer[n]=document.createElement("textarea"),this.symbol_buffer[n].className="symbol_buffer",this.symbol_buffer[n].cols="1",this.symbol_buffer[n].rows="1",this.symbol_buffer[n].style.opacity="0",this.container[n].appendChild(this.symbol_buffer[n]),this.work_space[n]=document.createElement("div"),this.work_space[n].className="result",this.work_space[n].style.border="1px solid #000",this.work_space[n].style.height="500px",this.work_space[n].onselectstart=function(){return!1},this.work_space[n].onmousedown=t,this.container[n].appendChild(this.work_space[n]),this.line[n]=new Array,this.current_line[n]=1,this.line[n][this.current_line[n]]=document.createElement("div"),this.line[n][this.current_line[n]].className="line",this.line[n][this.current_line[n]].setAttribute("line_number",this.current_line[n]),this.work_space[n].appendChild(this.line[n][this.current_line[n]]),1==s.console&&(this.console[n]=document.createElement("div"),this.console[n].className="console",this.console[n].style.border="1px solid #000",this.console[n].style.position="absolute",this.console[n].style.top="0px",this.console[n].style.right="0px",this.console[n].style.width="200px",this.console[n].style.height="50px",this.container[n].appendChild(this.console[n])),this.work_space[n].object=this,this.work_space[n].index=n,this.work_space[n].key_scope=Key_Scope.getInstance(),this.work_space[n].onclick=function(){this.object.symbol_buffer[this.index].focus()},this.symbol_buffer[n].object=this,this.symbol_buffer[n].index=n,this.symbol_buffer[n].key_scope=Key_Scope.getInstance(),this.symbol_buffer[n].onkeydown=function(e){void 0!=Observable&&this.object.publish(this.object,this.key_scope,this.index,e,"pressed")},this.symbol_buffer[n].onkeyup=function(e){void 0!=Observable&&this.object.publish(this.object,this.key_scope,this.index,e,"relised")},this.symbol_buffer[n].onblur=function(){this.key_scope.clearKeyMap()}}else console.log("sorry but you have not add any name to editors name field")}return e}(),Char_Class_Generator=function(){function e(e){return i=e,r=i.charCodeAt(0),47>=r||r>=58&&64>=r||r>=91&&96>=r||r>=122&&126>=r?l=c+"signifier":r>=48&&57>=r?l=c+"numeral":(r>=65&&90>=r||r>=97&&122>=r)&&(l=c+"character"),this}function s(e){i=e,r=i.charCodeAt(0);for(var s=[{start_code:32,end_code:32,desc:"space"},{start_code:33,end_code:33,desc:"exclamation"},{start_code:34,end_code:34,desc:"quotation "},{start_code:35,end_code:35,desc:"hash"},{start_code:36,end_code:36,desc:"dollar"},{start_code:37,end_code:37,desc:"percent"},{start_code:38,end_code:38,desc:"ampersand"},{start_code:39,end_code:39,desc:"apostrophe"},{start_code:40,end_code:40,desc:"left_parenthesis"},{start_code:41,end_code:41,desc:"right_parenthesis"},{start_code:42,end_code:42,desc:"asterix"},{start_code:43,end_code:43,desc:"plus"},{start_code:44,end_code:44,desc:"comma"},{start_code:45,end_code:45,desc:"hyphen"},{start_code:46,end_code:46,desc:"period"},{start_code:47,end_code:47,desc:"slash"},{start_code:58,end_code:58,desc:"colon"},{start_code:59,end_code:59,desc:"semicolon"},{start_code:60,end_code:60,desc:"less_than"},{start_code:61,end_code:61,desc:"equals"},{start_code:62,end_code:62,desc:"greater_than"},{start_code:63,end_code:63,desc:"question"},{start_code:64,end_code:64,desc:"at"},{start_code:65,end_code:90,desc:"uppercase"},{start_code:91,end_code:91,desc:"left_square_vrecket"},{start_code:92,end_code:92,desc:"backslash"},{start_code:93,end_code:93,desc:"right_square_vrecket"},{start_code:94,end_code:94,desc:"caret"},{start_code:95,end_code:95,desc:"underscore"},{start_code:96,end_code:96,desc:"grave_accent"},{start_code:123,end_code:123,desc:"left_curly_brace"},{start_code:124,end_code:124,desc:"vertical_bar"},{start_code:125,end_code:125,desc:"left_curly_brace"},{start_code:126,end_code:126,desc:"tilda"}],t=0;t<s.length;t++)l+=r==s[t].start_code?c+s[t].desc:r>=s[t].start_code&&r<=s[t].start_code?c+s[t].desc:"";return this}function t(e){return c=e||"",this}function n(){return l+=" ",this}function a(){return l}var i="",r="",l="",c="";return{mainClass:e,subClass:s,generate:a,setPrefix:t,space:n}},Observable=function(){this.subscribers=new Array,this.subscribe=function(e){this.subscribers.push(e)},this.unsubscribe=function(e){for(var s=0;s<this.subscribers.length;s++)if(this.subscribers[s]===e)return void this.subscribers[s].splice(s,1)},this.publish=function(e,s,t,n,a){for(var i=0;i<this.subscribers.length;i++)this.subscribers[i](e,s,t,n,a)}},Key_Observer=function(e,s,t,n,a){function i(){var e=c.getElementsByClassName("active")[0];void 0!=e&&(e.className=r.setPrefix("wet-").mainClass(e.innerHTML).space().subClass(e.innerHTML).generate())}var r=new Char_Class_Generator("wet-"),l=new Module.getInstance,c=e.container[t],o=new Divider;if(s.getKeyMap()[0]<"46"&&(n.preventDefault(),n.stopPropagation()),""==e.line[t][e.current_line[t]].innerHTML){i();var d=document.createElement("span");d.origin_class_name="wet-line-start",d.className=d.origin_class_name+" active";var u=document.createTextNode(" ");d.appendChild(u),e.line[t][e.current_line[t]].innerHTML=e.line[t][e.current_line[t]].innerHTML+d.outerHTML}if(""!=e.symbol_buffer[t].value){var m=c.getElementsByClassName("active")[0],h=m?m.className.split(" ")[0]:"",p=c.getElementsByClassName("active")[0].nextSibling;if("wet-line-start"==h&&(m.className="wet-line-start"),"character"==r.mainClass(e.symbol_buffer[t].value).generate())if(0==c.getElementsByClassName("parent").length){if(null==p){var v=c.getElementsByClassName("active")[0],_=document.createElement("span");_.className="wet-word parent";var f=document.createTextNode(e.symbol_buffer[t].value),b=document.createElement("span");b.className=r.setPrefix("wet-").mainClass(e.symbol_buffer[t].value).space().subClass(e.symbol_buffer[t].value).generate()+"active",b.appendChild(f),_.appendChild(b),i(),e.line[t][e.current_line[t]].appendChild(_)}else if(null!=p&&p.className.split(" ").indexOf("wet-word")>=0){var N=c.getElementsByClassName("active")[0].nextSibling,g=o.divide(N),f=document.createTextNode(e.symbol_buffer[t].value),b=document.createElement("span");b.className=r.setPrefix("wet-").mainClass(e.symbol_buffer[t].value).space().subClass(e.symbol_buffer[t].value).generate()+"active",b.appendChild(f),N.innerHTML=b.outerHTML+g,N.className="wet-word parent",i()}}else{var v=c.getElementsByClassName("active")[0];m.className=r.setPrefix("wet-").mainClass(e.symbol_buffer[t].value).space().subClass(e.symbol_buffer[t].value).generate(),_=c.getElementsByClassName("parent")[0];var f=document.createTextNode(e.symbol_buffer[t].value),b=document.createElement("span");b.className=r.setPrefix("wet-").mainClass(e.symbol_buffer[t].value).space().subClass(e.symbol_buffer[t].value).generate()+"active",b.appendChild(f),i(),null==v.nextSibling?_.appendChild(b):null!=v.nextSibling&&v.parentNode.insertBefore(b,v.nextSibling)}e.symbol_buffer[t].value=""}"pressed"==a?(l.setOptions({object:e,index:t}),l.runFunction(s.getStringKeyMap()),s.keyDown(n)):"relised"==a&&(l.runFunction(s.getStringKeyMap()),s.keyUp(n)),void 0!=e.console[t]&&(e.console[t].innerHTML=s.getKeyMap())},Key_Scope=function(){function e(){function e(e){if(0==l.length)l.push(e);else{for(var s=0;s<=l.length;s++)l[s]==e&&(c=!0);0==c&&l.push(e),c=!1}}function s(e){for(var s=0;s<=l.length;s++)l[s]==e&&l.splice(s,1)}function t(s){var t;window.event?t=s.keyCode:s.which&&(t=s.which),e(t)}function n(e){var t;window.event?t=e.keyCode:e.which&&(t=e.which),s(t)}function a(){return l.sort()}function i(){return l.sort().toString()}function r(){l=[]}var l=new Array,c=!1;return{keyDown:t,keyUp:n,getKeyMap:a,clearKeyMap:r,getStringKeyMap:i}}var s;return{getInstance:function(){return s||(s=e()),s}}}(),Module=function(){function e(){function e(e){var s=e.getElementsByClassName("active")[0],t=new Char_Class_Generator("wet-");void 0!=s&&(s.className=t.setPrefix("wet-").mainClass(s.innerHTML).space().subClass(s.innerHTML).generate())}function s(e){var s=e.getElementsByClassName("parent")[0];void 0!=s&&(s.className="wet-word")}function t(e,s){l[e]={function_name:s}}function n(){return console.log(l),l}function a(e){e>0&&void 0!=l[e]&&(this[l[e].function_name](r)||"")}function i(e){r=e}var r,l={8:{function_name:"backspase"},9:{function_name:"tab"}};return{addFunction:t,dump:n,runFunction:a,key_assotiation:l,setOptions:i,deletePrevioseCursor:e,deletePrevioseParent:s}}var s;return{getInstance:function(){return s||(s=e()),s}}}(),Divider=function(){function e(){this.divide=function(e){for(var s=e.innerHTML,t="",n=s.split(""),a=new Char_Class_Generator("wet-"),i=0;i<n.length;i++)t+='<span class="'+a.setPrefix("wet-").mainClass(n[i]).space().subClass(n[i]).generate()+'">'+n[i]+"</span>";return t},this.concat=function(e){if(void 0!=e){var s=e.innerHTML,t=/(<([^>]+)>)/gi;return s=s.replace(t,"")}return""},this.bisect=function(e){var s=new Array;s[0]="",s[1]="";var t=0;if(void 0!=e){for(var n=0;n<=e.childNodes.length-1;n++){var a=e.childNodes[n].className.split(" ").indexOf("active");s[t]+=e.childNodes[n].outerHTML,a>=0&&(t=1)}return s}return s}}return e}(),first=new Editor("someeditor",{console:!0}),second=new Editor("someeditor_another",{console:!1});Module.getInstance().backspase=function(e){var s=new Char_Class_Generator("wet-"),t=e.object.container[e.index],n=new Divider,a=t.getElementsByClassName("active")[0],i=t.getElementsByClassName("active")[0].previousSibling;if(null!=i)if("wet-line-start"==i.className.split(" ")[0]){var r=t.getElementsByClassName("active")[0].previousSibling.className.trim();a.parentNode.removeChild(a),i.className=r+" active"}else if("wet-word"==i.className.split(" ")[0]){i.className="wet-word parent",c=t.getElementsByClassName("parent")[0],c.innerHTML=n.divide(c);var l=i.childNodes[i.childNodes.length-1];l.className=s.setPrefix("wet-").mainClass(l.innerHTML).space().subClass(l.innerHTML).generate()+" active",a.parentNode.removeChild(a)}else{var r=t.getElementsByClassName("active")[0].previousSibling.className.trim();a.parentNode.removeChild(a),i.className=r+" active"}else if(void 0!=t.getElementsByClassName("parent")[0]&&"wet-line-start"!=t.getElementsByClassName("parent")[0].previousSibling.className){var c=t.getElementsByClassName("parent")[0],o=c.previousSibling;o.className=s.setPrefix("wet-").mainClass(o.innerHTML).space().subClass(o.innerHTML).generate()+" active",c.parentNode.removeChild(c)}else if(void 0!=t.getElementsByClassName("parent")[0]&&"wet-line-start"==t.getElementsByClassName("parent")[0].previousSibling.className){var c=t.getElementsByClassName("parent")[0],o=c.previousSibling;o.className="wet-line-start active",c.parentNode.removeChild(c)}else if("wet-line-start"==a.className.split(" ")[0]){var d=a.parentNode,u=d.previousSibling;if(null!=u){d.parentNode.removeChild(d),e.object.current_line[e.index]=e.object.current_line[e.index]-1,c=u.childNodes[u.childNodes.length-1],"wet-signifier"!=c.className.split(" ")[0]&&(c.innerHTML=n.divide(c)),u.childNodes[u.childNodes.length-1].className=u.childNodes[u.childNodes.length-1].className+" active";var a=t.getElementsByClassName("active")[0],i=t.getElementsByClassName("active")[0].previousSibling;null!=i&&"wet-word"==a.className.split(" ")[0]&&(a.className="wet-word parent",a.childNodes[a.childNodes.length-1].className=s.setPrefix("wet-").mainClass(a.childNodes[a.childNodes.length-1].innerHTML).space().subClass(a.childNodes[a.childNodes.length-1].innerHTML).generate()+" active")}}};var module=new Module.getInstance;module.addFunction("8","backspase"),Module.getInstance().left_arrow=function(e){var s=new Char_Class_Generator("wet-"),t=e.object.container[e.index],n=new Divider,a=t.getElementsByClassName("active")[0],i=t.getElementsByClassName("active")[0].previousSibling;if(null!=i)if("wet-line-start"==i.className.split(" ")[0])a.className=s.setPrefix("wet-").mainClass(a.innerHTML).space().subClass(a.innerHTML).generate(),i.className=s.setPrefix("wet-").mainClass(a.innerHTML).space().subClass(a.innerHTML).generate()+" active";else if("wet-word"==i.className.split(" ")[0]){i.className="wet-word parent",c=t.getElementsByClassName("parent")[0],c.innerHTML=n.divide(c);var r=i.childNodes[i.childNodes.length-1];r.className=s.setPrefix("wet-").mainClass(r.innerHTML).space().subClass(r.innerHTML).generate()+" active",a.className=s.setPrefix("wet-").mainClass(a.innerHTML).space().subClass(a.innerHTML).generate()}else{var l=t.getElementsByClassName("active")[0].previousSibling.className.trim();a.className=s.setPrefix("wet-").mainClass(a.innerHTML).space().subClass(a.innerHTML).generate(),i.className=l+" active"}else if(void 0!=t.getElementsByClassName("parent")[0]&&"wet-line-start"!=t.getElementsByClassName("parent")[0].previousSibling.className){var c=t.getElementsByClassName("parent")[0],o=c.previousSibling;o.className=s.setPrefix("wet-").mainClass(o.innerHTML).space().subClass(o.innerHTML).generate()+" active",a.className=s.setPrefix("wet-").mainClass(a.innerHTML).space().subClass(a.innerHTML).generate(),c.innerHTML=n.concat(c),c.className="wet-word"}else if(void 0!=t.getElementsByClassName("parent")[0]&&"wet-line-start"==t.getElementsByClassName("parent")[0].previousSibling.className){var c=t.getElementsByClassName("parent")[0],o=c.previousSibling;o.className="wet-line-start active",a.className=s.setPrefix("wet-").mainClass(a.innerHTML).space().subClass(a.innerHTML).generate(),c.innerHTML=n.concat(c),c.className="wet-word"}else if("wet-line-start"==a.className.split(" ")[0]){var d=a.parentNode,u=d.previousSibling;if(null!=u){d.parentNode.removeChild(d),e.object.current_line[e.index]=e.object.current_line[e.index]-1,c=u.childNodes[u.childNodes.length-1],"wet-signifier"!=c.className.split(" ")[0]&&(c.innerHTML=n.divide(c)),u.childNodes[u.childNodes.length-1].className=u.childNodes[u.childNodes.length-1].className+" active";var a=t.getElementsByClassName("active")[0],i=t.getElementsByClassName("active")[0].previousSibling;null!=i&&"wet-word"==a.className.split(" ")[0]&&(a.className="wet-word parent",a.childNodes[a.childNodes.length-1].className=s.setPrefix("wet-").mainClass(a.childNodes[a.childNodes.length-1].innerHTML).space().subClass(a.childNodes[a.childNodes.length-1].innerHTML).generate()+" active")}}};var module=new Module.getInstance;module.addFunction("37","left_arrow"),Module.getInstance().space=function(e){var s=new Char_Class_Generator("wet-"),t=e.object.container[e.index],n=new Divider,a=t.getElementsByClassName("parent")[0],i=t.getElementsByClassName("active")[0],r=0,l=i.parentElement.childNodes.length||!1,c=document.createElement("span");if(c.className=s.setPrefix("wet-").mainClass(" ").space().subClass(" ").generate()+" active",c.innerHTML=" ",0!=l)for(var o=0;o<i.parentElement.childNodes.length-1;o++){var d=i.parentElement.childNodes[o].className,u=d.split(" ");if(u.indexOf("active")>=0)break;r++}else r=!1;if(r==l-1)this.deletePrevioseCursor(t),void 0!=a&&(a.innerHTML=n.concat(a)),this.deletePrevioseParent(t),a.parentNode.insertBefore(c,a.nextSibling);else if(l-1>r|1==r&&void 0!=a){var m=n.bisect(a),h=document.createElement("span");h.className="wet-word",h.innerHTML=m[0];var p=document.createElement("span");p.className="wet-word",p.innerHTML=m[1],p.innerHTML=n.concat(p),a.parentNode.insertBefore(c,a.nextSibling),a.innerHTML=n.concat(h),i=t.getElementsByClassName("active")[0],i.parentNode.insertBefore(p,i.nextSibling),this.deletePrevioseParent(t)}};var module=new Module.getInstance;module.addFunction("32","space"),Module.getInstance().enter=function(e){var s=(new Char_Class_Generator("wet-"),e.object.container[e.index]),t=new Divider,n=s.getElementsByClassName("parent")[0],a=s.getElementsByClassName("active")[0];a.parentNode.className.split(" ").indexOf("parent")>=0?console.log(a.parentNode.className.split(" ").indexOf("parent")):(this.deletePrevioseCursor(s),n&&(n.innerHTML=t.concat(n)),this.deletePrevioseParent(s),e.object.current_line[e.index]++,e.object.line[e.index][e.object.current_line[e.index]]=document.createElement("div"),e.object.line[e.index][e.object.current_line[e.index]].className="line",e.object.line[e.index][e.object.current_line[e.index]].setAttribute("line_number",e.object.current_line[e.index]),e.object.work_space[e.index].appendChild(e.object.line[e.index][e.object.current_line[e.index]]))};var module=new Module.getInstance;module.addFunction("13","enter");
//# sourceMappingURL=app.min.js.map